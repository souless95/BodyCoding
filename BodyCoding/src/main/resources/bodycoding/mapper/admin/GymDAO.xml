<?xml version="1.0" encoding="UTF-8"?>

<!-- Mapper파일을 구성하기 위한 Doctype 설정 -->
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<!-- 지점리스트 조회 -->
<mapper namespace="com.bc.bodycoding.admin.gym.GymService">

	<select id="select"
		parameterType="global.dto.MemberDTO"
		resultType="global.dto.MemberDTO">
		select * from member where mem_type like '%ADMIN%'
	</select>
	
	<select id="selectOnegym"
		parameterType="global.dto.GymDTO"
		resultType="global.dto.GymDTO">
		select * from GYM_DETAIL where gym_code=#{gym_code}
	</select>
	<select id="selectOneMember"
		parameterType="global.dto.MemberDTO"
		resultType="global.dto.MemberDTO">
		select * from MEMBER where mem_type='ADMIN_SUB' and gym_code=#{gym_code}
	</select>
	
	<update id="update"
		parameterType="global.dto.GymDTO">

		update GYM_DETAIL set gym_scale=#{gym_scale}, <!-- gym_dtail_img=#{gym_dtail_img}, --> 
			facility_parking=#{facility_parking}, facility_health=#{facility_health}, facility_yoga=#{facility_yoga}, facility_gx=#{facility_gx}, 
			facility_pilates=#{facility_pilates}, facility_pt=#{facility_pt}, facility_24hour=#{facility_24hour}, facility_shower=#{facility_shower}, 
			facility_wear=#{facility_wear}, facility_locker=#{facility_locker}, rtime_week_start=#{rtime_week_start}, rtime_week_end=#{rtime_week_end}, 
			rtime_sat_start=#{rtime_sat_start}, rtime_sat_end=#{rtime_sat_end}, rtime_holy_start=#{rtime_holy_start}, rtime_holy_end=#{rtime_holy_end} 
		where gym_code=#{gym_code}
	</update>
	
	<delete id="delete"
		parameterType="global.dto.GymDTO">
		delete from GYM_DETAIL where gym_code=#{gym_code}
	</delete>
	<delete id="deleteM"
		parameterType="global.dto.GymDTO">
		delete from MEMBER where gym_code=#{gym_code}
	</delete>
	
	<insert id="insertMemberASUB"
		parameterType="global.dto.MemberDTO">
		insert into MEMBER (mem_id, mem_pass, mem_name, 
			mem_phone, mem_address, mem_type, mem_status, 
			gym_code,  mem_comment, mem_img)
    	values (#{mem_id}, #{mem_pass}, #{mem_name},
    		#{mem_phone}, #{mem_address}, #{mem_type}, #{mem_status},
    		#{gym_code}, #{mem_comment}, #{mem_img})
	</insert>
	<insert id="insertMember1"
	parameterType="global.dto.GymDTO">
	insert into GYM_DETAIL 
	   		(gym_code) 
	   	values 
	   		(#{gym_code})
	</insert>	
	
	
	<select id="codeCheck"
		parameterType="global.dto.GymDTO"
		resultType="int">
		select count(*) from GYM_DETAIL where gym_code=#{gym_code}
	</select>
</mapper>