<?xml version="1.0" encoding="UTF-8"?>

<!-- Mapper파일을 구성하기 위한 Doctype 설정 -->
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.bc.bodycoding.calendar.CalendarService">

<insert id="insertSchedule" parameterType="com.bc.bodycoding.calendar.CalendarDTO">
  <selectKey keyProperty="lesson_idx" resultType="java.lang.String" order="BEFORE">
    select bodycoding_seq.nextval as lesson_idx from dual
  </selectKey>
  insert into lesson (lesson_idx, trainer_id, lesson_category, lesson_name,
  	lesson_day, lesson_start_time, lesson_end_time, lesson_capacity)
  values (#{lesson_idx}, #{trainer_id}, #{lesson_category}, #{lesson_name},
  	#{lesson_day}, #{lesson_start_time}, #{lesson_end_time}, #{lesson_capacity})
</insert>

<delete id="deleteSchedule"
	parameterType="com.bc.bodycoding.calendar.CalendarDTO">
	delete from lesson where lesson_idx=#{lesson_idx}
</delete>

<update id="updateSchedule"
	parameterType="com.bc.bodycoding.calendar.CalendarDTO">
	update calendar set start1=#{start1}, end=#{end} where id=#{id}
</update>

<update id="updateSchedule2"
	parameterType="com.bc.bodycoding.calendar.CalendarDTO">
	update lesson set lesson_idx=#{lesson_idx} where lesson_idx=#{lesson_idx}
</update>

<select id="loadCList"
	parameterType="com.bc.bodycoding.calendar.CalendarDTO"
	resultType="com.bc.bodycoding.calendar.CalendarDTO">
	select * from lesson
</select>

</mapper>